<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wayland Server API: wl_data_offer_interface Struct Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wayland Server API
   &#160;<span id="projectnumber">1.16.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-attribs">Data Fields</a>  </div>
  <div class="headertitle">
<div class="title">wl_data_offer_interface Struct Reference<div class="ingroups"><a class="el" href="group__iface__wl__data__offer.html">The wl_data_offer interface</a></div></div>  </div>
</div><!--header-->
<div class="contents">

<p><code>#include &lt;<a class="el" href="wayland-server-protocol_8h_source.html">wayland-server-protocol.h</a>&gt;</code></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-attribs"></a>
Data Fields</h2></td></tr>
<tr class="memitem:a53a56e1b21103223e948ba8d7694e936"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwl__data__offer__interface.html#a53a56e1b21103223e948ba8d7694e936">accept</a> )(struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource, uint32_t serial, const char *mime_type)</td></tr>
<tr class="memdesc:a53a56e1b21103223e948ba8d7694e936"><td class="mdescLeft">&#160;</td><td class="mdescRight">accept one of the offered mime types  <a href="#a53a56e1b21103223e948ba8d7694e936">More...</a><br /></td></tr>
<tr class="separator:a53a56e1b21103223e948ba8d7694e936"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aef4f2510405b9e60236c838f0daf94d4"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwl__data__offer__interface.html#aef4f2510405b9e60236c838f0daf94d4">receive</a> )(struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource, const char *mime_type, int32_t fd)</td></tr>
<tr class="memdesc:aef4f2510405b9e60236c838f0daf94d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">request that the data is transferred  <a href="#aef4f2510405b9e60236c838f0daf94d4">More...</a><br /></td></tr>
<tr class="separator:aef4f2510405b9e60236c838f0daf94d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ac93ae0dae416222450bce3d15276d303"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwl__data__offer__interface.html#ac93ae0dae416222450bce3d15276d303">destroy</a> )(struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource)</td></tr>
<tr class="memdesc:ac93ae0dae416222450bce3d15276d303"><td class="mdescLeft">&#160;</td><td class="mdescRight">destroy data offer  <a href="#ac93ae0dae416222450bce3d15276d303">More...</a><br /></td></tr>
<tr class="separator:ac93ae0dae416222450bce3d15276d303"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a78a9a38cb4ced91535b4b139e45aa54d"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwl__data__offer__interface.html#a78a9a38cb4ced91535b4b139e45aa54d">finish</a> )(struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource)</td></tr>
<tr class="memdesc:a78a9a38cb4ced91535b4b139e45aa54d"><td class="mdescLeft">&#160;</td><td class="mdescRight">the offer will no longer be used  <a href="#a78a9a38cb4ced91535b4b139e45aa54d">More...</a><br /></td></tr>
<tr class="separator:a78a9a38cb4ced91535b4b139e45aa54d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae6bc10748c734520a66da41a113b65d4"><td class="memItemLeft" align="right" valign="top">void(*&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="structwl__data__offer__interface.html#ae6bc10748c734520a66da41a113b65d4">set_actions</a> )(struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource, uint32_t dnd_actions, uint32_t preferred_action)</td></tr>
<tr class="memdesc:ae6bc10748c734520a66da41a113b65d4"><td class="mdescLeft">&#160;</td><td class="mdescRight">set the available/preferred drag-and-drop actions  <a href="#ae6bc10748c734520a66da41a113b65d4">More...</a><br /></td></tr>
<tr class="separator:ae6bc10748c734520a66da41a113b65d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Field Documentation</h2>
<a id="a53a56e1b21103223e948ba8d7694e936"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53a56e1b21103223e948ba8d7694e936">&#9670;&nbsp;</a></span>accept</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* wl_data_offer_interface::accept) (struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource, uint32_t serial, const char *mime_type)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>accept one of the offered mime types </p>
<p>Indicate that the client can accept the given mime type, or NULL for not accepted.</p>
<p>For objects of version 2 or older, this request is used by the client to give feedback whether the client can receive the given mime type, or NULL if none is accepted; the feedback does not determine whether the drag-and-drop operation succeeds or not.</p>
<p>For objects of version 3 or newer, this request determines the final result of the drag-and-drop operation. If the end result is that no mime types were accepted, the drag-and-drop operation will be cancelled and the corresponding drag source will receive wl_data_source.cancelled. Clients may still use this event in conjunction with wl_data_source.action for feedback. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">serial</td><td>serial number of the accept request </td></tr>
    <tr><td class="paramname">mime_type</td><td>mime type accepted by the client </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ac93ae0dae416222450bce3d15276d303"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ac93ae0dae416222450bce3d15276d303">&#9670;&nbsp;</a></span>destroy</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* wl_data_offer_interface::destroy) (struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>destroy data offer </p>
<p>Destroy the data offer. </p>

</div>
</div>
<a id="a78a9a38cb4ced91535b4b139e45aa54d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a78a9a38cb4ced91535b4b139e45aa54d">&#9670;&nbsp;</a></span>finish</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* wl_data_offer_interface::finish) (struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>the offer will no longer be used </p>
<p>Notifies the compositor that the drag destination successfully finished the drag-and-drop operation.</p>
<p>Upon receiving this request, the compositor will emit wl_data_source.dnd_finished on the drag source client.</p>
<p>It is a client error to perform other requests than wl_data_offer.destroy after this one. It is also an error to perform this request after a NULL mime type has been set in wl_data_offer.accept or no action was received through wl_data_offer.action. </p><dl class="section since"><dt>Since</dt><dd>3 </dd></dl>

</div>
</div>
<a id="aef4f2510405b9e60236c838f0daf94d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef4f2510405b9e60236c838f0daf94d4">&#9670;&nbsp;</a></span>receive</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* wl_data_offer_interface::receive) (struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource, const char *mime_type, int32_t fd)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>request that the data is transferred </p>
<p>To transfer the offered data, the client issues this request and indicates the mime type it wants to receive. The transfer happens through the passed file descriptor (typically created with the pipe system call). The source client writes the data in the mime type representation requested and then closes the file descriptor.</p>
<p>The receiving client reads from the read end of the pipe until EOF and then closes its end, at which point the transfer is complete.</p>
<p>This request may happen multiple times for different mime types, both before and after wl_data_device.drop. Drag-and-drop destination clients may preemptively fetch data or examine it more closely to determine acceptance. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mime_type</td><td>mime type desired by receiver </td></tr>
    <tr><td class="paramname">fd</td><td>file descriptor for data transfer </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="ae6bc10748c734520a66da41a113b65d4"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ae6bc10748c734520a66da41a113b65d4">&#9670;&nbsp;</a></span>set_actions</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void(* wl_data_offer_interface::set_actions) (struct <a class="el" href="structwl__client.html">wl_client</a> *client, struct <a class="el" href="structwl__resource.html">wl_resource</a> *resource, uint32_t dnd_actions, uint32_t preferred_action)</td>
        </tr>
      </table>
</div><div class="memdoc">

<p>set the available/preferred drag-and-drop actions </p>
<p>Sets the actions that the destination side client supports for this operation. This request may trigger the emission of wl_data_source.action and wl_data_offer.action events if the compositor needs to change the selected action.</p>
<p>This request can be called multiple times throughout the drag-and-drop operation, typically in response to wl_data_device.enter or wl_data_device.motion events.</p>
<p>This request determines the final result of the drag-and-drop operation. If the end result is that no action is accepted, the drag source will receive wl_drag_source.cancelled.</p>
<p>The dnd_actions argument must contain only values expressed in the wl_data_device_manager.dnd_actions enum, and the preferred_action argument must only contain one of those values set, otherwise it will result in a protocol error.</p>
<p>While managing an "ask" action, the destination drag-and-drop client may perform further wl_data_offer.receive requests, and is expected to perform one last wl_data_offer.set_actions request with a preferred action other than "ask" (and optionally wl_data_offer.accept) before requesting wl_data_offer.finish, in order to convey the action selected by the user. If the preferred action is not in the wl_data_offer.source_actions mask, an error will be raised.</p>
<p>If the "ask" action is dismissed (e.g. user cancellation), the client is expected to perform wl_data_offer.destroy right away.</p>
<p>This request can only be made on drag-and-drop offers, a protocol error will be raised otherwise. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">dnd_actions</td><td>actions supported by the destination client </td></tr>
    <tr><td class="paramname">preferred_action</td><td>action preferred by the destination client </td></tr>
  </table>
  </dd>
</dl>
<dl class="section since"><dt>Since</dt><dd>3 </dd></dl>

</div>
</div>
<hr/>The documentation for this struct was generated from the following file:<ul>
<li>/dev/shm/libwayland/wayland/build/protocol/<a class="el" href="wayland-server-protocol_8h_source.html">wayland-server-protocol.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Thu Sep 6 2018 13:02:11 for Wayland Server API by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
